{% extends "layouts/base.html" %}
{% block title %}Главная{% endblock %}

{% block content %}
<div class="jumbotron text-center">
    <h1 class="display-4">Добро пожаловать в Flask Auth App</h1>
    <p class="lead">Это приложение для авторизации, регистрации и управления профилем пользователя с использованием Flask.</p>
</div>

<!-- Карусель с фотографиями курсов -->
<div id="courseCarousel" class="carousel slide" data-bs-ride="carousel" data-bs-interval="3000">
    <div class="carousel-inner">
        <div class="carousel-item active">
            <img src="{{ url_for('static', filename='images/banner_1.jpg') }}" class="d-block w-100" alt="Курс 1" loading="auto">
            <div class="carousel-caption d-none d-md-block">
                <h5>Курс 1</h5>
                <p>Описание курса 1.</p>
            </div>
        </div>
        <div class="carousel-item">
            <img src="{{ url_for('static', filename='images/banner_2.jpg') }}" class="d-block w-100" alt="Курс 2" loading="auto">
            <div class="carousel-caption d-none d-md-block">
                <h5>Курс 2</h5>
                <p>Описание курса 2.</p>
            </div>
        </div>
        <div class="carousel-item">
            <img src="{{ url_for('static', filename='images/banner_3.jpg') }}" class="d-block w-100" alt="Курс 3" loading="auto">
            <div class="carousel-caption d-none d-md-block">
                <h5>Курс 3</h5>
                <p>Описание курса 3.</p>
            </div>
        </div>
    </div>
    <button class="carousel-control-prev" type="button" data-bs-target="#courseCarousel" data-bs-slide="prev" aria-label="Предыдущий слайд">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#courseCarousel" data-bs-slide="next" aria-label="Следующий слайд">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
    </button>
</div>

<!-- Раздел с видео -->
<div class="mt-5">
    <h2>Наши видео</h2>
    <div class="row">
        <div class="col-md-4">
            <div class="video-container">
                <select class="form-select mb-2" aria-label="Выбор платформы" onchange="changeVideo(this, 'video1')">
                    <option selected>Выберите платформу</option>
                    <option value="plvideo">Plvideo</option>
                    <option value="rutube">Rutube</option>
                    <option value="youtube">YouTube</option>
                </select>
                <iframe id="video1" width="100%" height="200" frameborder="0" allowfullscreen></iframe>
            </div>
        </div>
        <div class="col-md-4">
            <div class="video-container">
                <select class="form-select mb-2" aria-label="Выбор платформы" onchange="changeVideo(this, 'video2')">
                    <option selected>Выберите платформу</option>
                    <option value="plvideo">Plvideo</option>
                    <option value="rutube">Rutube</option>
                    <option value="youtube">YouTube</option>
                </select>
                <iframe id="video2" width="100%" height="200" frameborder="0" allowfullscreen></iframe>
            </div>
        </div>
        <div class="col-md-4">
            <div class="video-container">
                <select class="form-select mb-2" aria-label="Выбор платформы" onchange="changeVideo(this, 'video3')">
                    <option selected>Выберите платформу</option>
                    <option value="plvideo">Plvideo</option>
                    <option value="rutube">Rutube</option>
                    <option value="youtube">YouTube</option>
                </select>
                <iframe id="video3" width="100%" height="200" frameborder="0" allowfullscreen></iframe>
            </div>
        </div>
    </div>
</div>

<script>
    function changeVideo(select, videoId) {
        const videoFrame = document.getElementById(videoId);
        const platform = select.value;

        let videoUrl = '';
        switch (platform) {
            case 'plvideo':
                if (videoId === 'video1') videoUrl = 'https://plvideo.ru/embed/73d8U_R6GJqY';
                else if (videoId === 'video2') videoUrl = 'https://plvideo.ru/embed/pDzyqns0UbE6';
                else if (videoId === 'video3') videoUrl = 'https://plvideo.ru/embed/cnuvJHabNvN1';
                break;
            case 'rutube':
                if (videoId === 'video1') videoUrl = 'https://rutube.ru/video/embed/184d1b81ff3f46fff2c23b225368f2c2';
                else if (videoId === 'video2') videoUrl = 'https://rutube.ru/video/embed/0bb81a8382263e39b4f7285134cda07e';
                else if (videoId === 'video3') videoUrl = 'https://rutube.ru/video/embed/a2a7d815df5b95c93274c717cbea3fb1';
                break;
            case 'youtube':
                if (videoId === 'video1') videoUrl = 'https://www.youtube.com/embed/mV2Tnk5O2L0';
                else if (videoId === 'video2') videoUrl = 'https://www.youtube.com/embed/jZ2hnf1u9J0';
                else if (videoId === 'video3') videoUrl = 'https://www.youtube.com/embed/4f4anaEe4Zo';
                break;
            default:
                videoUrl = '';
        }
        videoFrame.src = videoUrl;
    }
</script>


<!-- Раздел с анимированными фотографиями -->
<div class="mt-5 text-center">
    <div class="row justify-content-center">
        <div class="col-auto">
            <div class="photo-container">
                <img src="{{ url_for('static', filename='images/video-platforms/Platforma_Channel.png') }}" class="img-fluid animated-photo" alt="Фото 1" style="width: 150px; height: auto;">
            </div>
        </div>
        <div class="col-auto">
            <div class="photo-container">
                <img src="{{ url_for('static', filename='images/video-platforms/Rutube_Channel.png') }}" class="img-fluid animated-photo" alt="Фото 2" style="width: 150px; height: auto;">
            </div>
        </div>
        <div class="col-auto">
            <div class="photo-container">
                <img src="{{ url_for('static', filename='images/video-platforms/Youtube_Channel.png') }}" class="img-fluid animated-photo" alt="Фото 3" style="width: 150px; height: auto;">
            </div>
        </div>
    </div>
</div>


<!-- Раздел с курсами -->
<div class="mt-5">
    <h2>Популярные курсы</h2>
    <div class="row">
        {% if courses %}
            {% for course in courses %}
            <div class="col-md-4">
                <div class="card">
                    <img src="{{ url_for('static', filename='images/' + course.image) }}" class="card-img-top" alt="{{ course.title }}">
                    <div class="card-body">
                        <h5 class="card-title">{{ course.title }}</h5>
                        <p class="card-text">{{ course.description }}</p>
                        <button class="btn btn-primary" data-toggle="modal" data-target="#courseModal{{ course.id }}">Подробнее</button>
                    </div>
                </div>
            </div>

            <!-- Модальное окно для курса -->
            <div class="modal fade" id="courseModal{{ course.id }}" tabindex="-1" role="dialog" aria-labelledby="courseModalLabel{{ course.id }}" aria-hidden="true">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="courseModalLabel{{ course.id }}">{{ course.title }}</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <p>{{ course.details }}</p>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Закрыть</button>
                            <a href="{{ url_for('courses.list_courses') }}" class="btn btn-primary">Назад к курсам</a>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        {% else %}
            <p>Нет доступных курсов.</p>
        {% endif %}
    </div>
</div>
{% endblock %}
